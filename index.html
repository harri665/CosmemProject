<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Riemann Sum Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/9.5.0/math.min.js"></script>
    <script src="riemann.js"></script>
    <!-- Include MathJax for LaTeX rendering -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script
      id="MathJax-script"
      async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
    ></script>
  </head>
  <button
    id="scrollButton"
    onclick="scrollPage()"
    class="fixed top-5 left-5 p-2 bg-red-500 text-white rounded-md z-50 hover:bg-blue-700 transition-colors duration-300"
  >
    Go to Bottom
  </button>

  <body class="bg-gray-100 font-sans leading-normal tracking-normal">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <h1 class="text-2xl sm:text-3xl pt-8 pb-2 text-center font-bold">
        Riemann Sum Calculator
      </h1>
      <p class="">By Harrison and Mary</p>

      <div class="bg-white shadow-md rounded px-4 pt-6 pb-8 mb-4 flex flex-col">
        <div class="container mx-auto px-4">
          <div class="flex sm:flex-row justify-between items-center">
            <button
              class="btn bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded text-sm sm:text-base"
              onclick="example('x^2',0,10,5,'left')"
            >
              x^2
            </button>
            <button
              class="btn bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded text-sm sm:text-base"
              onclick="example('sin(x)',0,10,20,'left')"
            >
              sin(x)
            </button>
            <button
              class="btn bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded text-sm sm:text-base"
              onclick="example('tan(x)',1.2,2,20,'midpoint')"
            >
              tan(x)
            </button>
            <button
              class="btn bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded text-sm sm:text-base"
              onclick="example('1/2x',0,10,5,'right')"
            >
              1/2x
            </button>
          </div>
        </div>

        <form id="riemannForm" class="mb-4">
          <input
            type="text"
            oninput="updateLaTeX(this.value)"
            onchange="calculateRiemannSum()"
            id="functionInput"
            placeholder="Enter function in LaTeX (e.g., x^2)"
            class="shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline mb-4 text-sm sm:text-base"
            required
          />
          <input
            type="number"
            onchange="calculateRiemannSum()"
            id="a"
            placeholder="Enter a (start of interval)"
            class="shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline mb-4 text-sm sm:text-base"
            required
          />
          <input
            type="number"
            onchange="calculateRiemannSum()"
            id="b"
            placeholder="Enter b (end of interval)"
            class="shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline mb-4 text-sm sm:text-base"
            required
          />
          <input
            type="number"
            onchange="calculateRiemannSum()"
            id="n"
            placeholder="Enter n (number of subintervals)"
            class="shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline mb-4 text-sm sm:text-base"
            required
          />
          <select
            id="method"
            onchange="calculateRiemannSum()"
            class="shadow border rounded py-2 px-3 text-gray-700 mb-4 text-sm sm:text-base"
          >
            <option value="left">Left Endpoint</option>
            <option value="right">Right Endpoint</option>
            <option value="midpoint">Midpoint</option>
          </select>

          <button
            type="button"
            onclick="calculateRiemannSum()"
            class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline text-sm sm:text-base"
          >
            Calculate
          </button>
        </form>
        <div id="result" class="pt-4"></div>
        <div id="latexDisplay" class="mt-4 mb-4">
          <!-- LaTeX content will be dynamically inserted and rendered here -->
        </div>
        <div id="canvasContainer" class="pt-4">
          <canvas
            id="myCanvas"
            style="width: 100%; max-width: 600px; height: auto"
            class="border-2 border-gray-300"
          >
            Your browser does not support the HTML canvas tag.
          </canvas>
        </div>
        <h2 class="text-2xl sm:text-3xl pt-8 pb-2 text-center font-bold">
          Real world !
        </h2>
        <h2 class="sm:text-3xl pt-8 pb-2 text-center">
          Riemann sums are commonly used in voxel application in the 3d world as
          shown below
        </h2>

        <!-- partial:index.partial.html -->

      </div>
    </div>
    <script>
      function updateLaTeX(expression) {
        // Dynamically update the displayed LaTeX using MathJax
        const latexDisplay = document.getElementById("latexDisplay");
        latexDisplay.innerHTML = `\\(${expression}\\)`;
        MathJax.typesetPromise([latexDisplay]); // This tells MathJax to process the updated text
      }
    </script>
    <div class="container mx-auto p-4">
      <div class="flex flex-wrap -m-2">
        <div class="p-2">
          <label class="block text-sm font-medium text-gray-700"
            >Show original mesh</label
          >
          <button
            id="showOriginalMesh"
            class="mt-1 w-full px-3 py-2 bg-gray-200 text-gray-700 rounded-md focus:outline-none focus:shadow-outline"
          >
            Toggle Original
          </button>
        </div>
        <div class="p-2">
          <label class="block text-sm font-medium text-gray-700"
            >Show box helper</label
          >
          <button
            id="showBoxHelper"
            class="mt-1 w-full px-3 py-2 bg-gray-200 text-gray-700 rounded-md focus:outline-none focus:shadow-outline"
          >
            Toggle Helper
          </button>
        </div>
        <div class="p-2 w-full sm:w-1/2">
          <label for="gridSize" class="block text-sm font-medium text-gray-700"
            >Grid Size</label
          >
          <input
            id="gridSize"
            type="range"
            min="0.3"
            max="0.8"
            step="0.1"
            value="0.3"
            class="mt-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
          />
        </div>
        <div class="p-2 w-full sm:w-1/2">
          <label for="voxelSize" class="block text-sm font-medium text-gray-700"
            >Voxel Size</label
          >
          <input
            id="voxelSize"
            type="range"
            min="0.05"
            max="0.3"
            step="0.01"
            value="0.2"
            class="mt-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
          />
        </div>
      </div>
    </div>
    <canvas class="pointer-events-none h-[100vh]" id="canvas"></canvas>
    <div class="container"></div>
    <script type="importmap">
      {
        "imports": {
          "three": "https://cdnjs.cloudflare.com/ajax/libs/three.js/0.145.0/three.module.min.js",
          "three/addons/": "https://threejs.org/examples/jsm/"
        }
      }
    </script>
    <script
      async
      src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"
    ></script>
    <!-- partial -->
    <script type="module" src="./script.js"></script>
    <script>
 
    </script>
  </body>
</html>
